# Chapter 1 计算机系统漫游

## 1.1 信息就是位加上下文

## 1.2 程序被其他程序翻译成不同的格式

## 1.3 了解编译系统如何工作是大有益处的

## 1.4 处理器读并解释储存在内存中的指令

### 1.4.1 系统的硬件组成

### 1.4.2 运行hello程序

## 1.5 高速缓存至关重要

## 1.6 存储设备形成层次结构

## 1.7 操作系统管理硬件

### 1.7.1 进程

### 1.7.2 线程

### 1.7.3 虚拟内存

### 1.7.4 文件

## 1.8 系统之间利用网络通信

## 1.9 重要主题

### 1.9.1 Amdahl定律

### 1.9.2 并发和并行

在数字计算机的整个历程中，有两个需求是驱动进步的持续动力：即更多和更快。

并发（concurrency）：指一个同时具有多个活动的系统；

并行（parallelism）：指的是用并发来使一个系统更快；

1. 线程级并发

构建在进程的抽象上，可以设计出同时具有多个程序执行的系统，即导致了并发；使用线程，可以在一个进程中执行多个控制流；自从出现时间共享以来，计算机系统中就开始了对并发执行的支持。并发执行是模拟出来的，是通过使用一台计算机在它正砸执行的进程中快速切换来实现的；计算由一个处理器来完成的配置叫做单处理器系统；

当构建一个单操作系统内核控制的多处理器组成的系统时，我们就得到一个多处理器系统；随着多核处理器和超线程（hyperthreading）技术的出现，这种系统才变得常见；

超线程，又称为同时多线程，是一项允许应一个CPU执行多个控制流的技术；它涉及到CPU的某些硬件有多个备份，比如程序计数器和寄存器文件，而其他硬件部分只有一份，比如执行浮点算数运算的单元；常规的处理器需要大约20000个时钟周期来左不同线程之间的转换，而超线程的处理器可以在单个周期的基础上决定需要执行哪个线程；例如Intel Core i7处理器可以让每个核执行两个线程；

多处理器的使用从两个方面提高了系统的性能；首先是减少了在执行多个任务时模拟并发的需要，其次是代码实现多线程可以使程序运行得更快；

2. 指令级并行

现代处理器可以同时执行多条指令的属性称为指令集并行；

如果处理器可以达到比一个周期一条指令更快的执行速率，就称之为超标量（super-scalar）处理器；

3. 单指令、多数据并行

在最低层次上，许多现代处理器拥有特殊的硬件，允许一条指令产生多个可以执行的操作，这种方式称为单指令、多数据，即SIMD并行；例如，最新几代的Intel和AMD处理器都具有并行地对8对单精度浮点数（C数据类型float）做加法的指令；

提供这些SIMD指令多是为了提高处理影像、声音和视频数据引用的执行速度；有些编译器会试图从C程序中自动抽取SIMD并行性能，但是更可靠的方法是用编译器支持的特殊的向量数据类型来写程序；

### 1.9.3 计算机系统中抽象的重要性

抽象的使用是计算机科学中最为重要的概念之一；例如，为一组函数规定一个简单的应用程序接口（API）就是一个很好的编程习惯；不同的编程语言提供不同形式和等级的抽象支持，例如Java类的声明和C语言的函数原型；

在处理器里，指令集架构提供了对手机处理器硬件的抽象；使用这个抽象，机器代码程序表现得就好像运行在一个一次只执行一条指令得处理器上；底层的硬件远比抽象描述的要复杂精细，它并行地执行多条指令，但又总是与那个简单有序的模型保持一致。只要模型一致，不同的处理器实现也能执行同样的机器代码，而又提供不同的开销和性能；

在学习操作系统时，我们介绍了三个抽象：文件是对I/O设备的抽象，虚拟内存是对程序存储器的抽象，而进程是对一个正在运行的程序的抽象；我们再添加一个新的抽象：虚拟机，它提供对整个计算机的抽象，包括操作系统、处理器和程序。

## 1.10 小结

